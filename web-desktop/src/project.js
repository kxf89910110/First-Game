window.__require=function t(e,o,i){function n(r,a){if(!o[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+r+"'")}}var l=o[r]={exports:{}};e[r][0].call(l.exports,function(t){return n(e[r][1][t]||t)},l,l.exports,t,e,o,i)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({Block:[function(t,e,o){"use strict";cc._RF.push(e,"08543LfZ1NOQZ1UStgGS/Or","Block"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(t,e,o,i){var n=this;this.scheduleOnce(function(){var o=cc.moveBy(t,cc.v2(0,-e));n.node.runAction(o),i()},o)},e=__decorate([n],e)}(cc.Component));o.Block=c,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"0c6d2dAtRdGO5hQ1DH49nVO","Game"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Stage"),n=t("./OverPanel"),c=cc._decorator,r=c.ccclass,a=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stage=null,e.scoreLabel=null,e.oneButton=null,e.twoButton=null,e.overPanel=null,e}return __extends(e,t),e.prototype.start=function(){this.overPanel.init(this),this.overPanel.hide(),this.startGame(),this.addListeners()},e.prototype.handleStep=function(t){this.stage.playerJump(t)},e.prototype.addScore=function(t){this.score+=t,this.scoreLabel.string=this.score+""},e.prototype.startGame=function(){this.score=0,this.scoreLabel.node.active=!0,this.scoreLabel.string="0",this.stage.init(this)},e.prototype.overGame=function(){cc.log("over"),this.scoreLabel.node.active=!1,this.overPanel.show(this.score)},e.prototype.onBtnOne=function(){this.handleStep(1)},e.prototype.onBtnTwo=function(){this.handleStep(2)},e.prototype.addListeners=function(){var t=this;this.oneButton.on(cc.Node.EventType.TOUCH_END,this.onBtnOne,this),this.twoButton.on(cc.Node.EventType.TOUCH_END,this.onBtnTwo,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){e.keyCode===cc.macro.KEY.left?t.handleStep(1):e.keyCode===cc.macro.KEY.right&&t.handleStep(2)},this)},e.prototype.removeListeners=function(){},__decorate([a(i.Stage)],e.prototype,"stage",void 0),__decorate([a(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([a(cc.Node)],e.prototype,"oneButton",void 0),__decorate([a(cc.Node)],e.prototype,"twoButton",void 0),__decorate([a(n.OverPanel)],e.prototype,"overPanel",void 0),e=__decorate([r],e)}(cc.Component);o.Game=s,cc._RF.pop()},{"./OverPanel":"OverPanel","./Stage":"Stage"}],OverPanel:[function(t,e,o){"use strict";cc._RF.push(e,"9a389SLZb5MBJMUKkVwuNVs","OverPanel"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scoreLabel=null,e.restartButton=null,e}return __extends(e,t),e.prototype.init=function(t){var e=this;this.game=t,this.restartButton.on(cc.Node.EventType.TOUCH_END,function(){e.hide(),cc.director.loadScene("game")},this)},e.prototype.show=function(t){this.scoreLabel.string=t+"",this.node.active=!0},e.prototype.hide=function(){this.node.active=!1},__decorate([c(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([c(cc.Node)],e.prototype,"restartButton",void 0),e=__decorate([n],e)}(cc.Component);o.OverPanel=r,cc._RF.pop()},{}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"2dd3aTbuNdI04zLB/5zr8NQ","Player"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(t,e,o,i,n){this.jumpDistance=t,this.jumpHeight=e,this.jumpDuration=o,this.fallDuration=i,this.fallHeight=n,this.index=0,this.canJump=!0},e.prototype.jump=function(t){var e=this;this.canJump=!1,this.index+=t;var o=cc.jumpBy(this.jumpDuration,cc.v2(t*this.jumpDistance,0),this.jumpHeight,1),i=cc.callFunc(function(){e.canJump=!0});this.node.runAction(cc.sequence(o,i))},e.prototype.die=function(){this.canJump=!1;var t=cc.moveBy(this.fallDuration,cc.v2(0,-this.fallHeight));this.node.runAction(t)},e=__decorate([n],e)}(cc.Component));o.Player=c,cc._RF.pop()},{}],Stage:[function(t,e,o){"use strict";cc._RF.push(e,"954a1JEfzZP+rRzRGON1TY6","Stage"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Player"),n=t("./Block"),c=cc._decorator,r=c.ccclass,a=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stepDistance=200,e.jumpHeight=100,e.jumpDuration=.3,e.fallHeight=500,e.fallDuration=.3,e.initStayDuration=2,e.minStayDuration=.3,e.speed=.1,e.blockPrefab=null,e.blockLayer=null,e.player=null,e.lastBlock=!0,e.lastBlockX=0,e}return __extends(e,t),e.prototype.init=function(t){this.game=t,this.stayDuration=this.initStayDuration,this.player.init(this.stepDistance,this.jumpHeight,this.jumpDuration,this.fallDuration,this.fallHeight),this.blockList=[],this.addBlock(cc.v2(0,0));for(var e=0;e<5;e++)this.randomAddBlock()},e.prototype.addSpeed=function(){this.stayDuration-=this.speed,this.stayDuration<=this.minStayDuration&&(this.stayDuration=this.minStayDuration),cc.log(this.stayDuration)},e.prototype.playerJump=function(t){var e=this;if(this.player.canJump){if(this.player.jump(t),this.moveStage(t),!this.hasBlock(this.player.index))cc.log("die"),this.scheduleOnce(function(){e.player.die(),e.game.overGame()},this.jumpDuration);else{var o=this.player.index;this.blockList[o].init(this.fallDuration,this.fallHeight,this.stayDuration,function(){e.player.index===o&&(e.player.die(),e.game.overGame())}),this.game.addScore(1===t?1:3)}this.player.index%10==0&&this.addSpeed()}},e.prototype.moveStage=function(t){var e=cc.moveBy(this.jumpDuration,cc.v2(-this.stepDistance*t,0));this.blockLayer.runAction(e);for(var o=0;o<t;o++)this.randomAddBlock()},e.prototype.randomAddBlock=function(){!this.lastBlock||Math.random()>.5?this.addBlock(cc.v2(this.lastBlockX+this.stepDistance,0)):this.addBlank(),this.lastBlockX=this.lastBlockX+this.stepDistance},e.prototype.addBlock=function(t){var e=cc.instantiate(this.blockPrefab);this.blockLayer.addChild(e),e.position=t,this.blockList.push(e.getComponent(n.Block)),this.lastBlock=!0},e.prototype.addBlank=function(){this.blockList.push(null),this.lastBlock=!1},e.prototype.hasBlock=function(t){return this.blockList[t]},__decorate([a(cc.Integer)],e.prototype,"stepDistance",void 0),__decorate([a(cc.Integer)],e.prototype,"jumpHeight",void 0),__decorate([a(cc.Float)],e.prototype,"jumpDuration",void 0),__decorate([a(cc.Integer)],e.prototype,"fallHeight",void 0),__decorate([a(cc.Float)],e.prototype,"fallDuration",void 0),__decorate([a(cc.Float)],e.prototype,"initStayDuration",void 0),__decorate([a(cc.Float)],e.prototype,"minStayDuration",void 0),__decorate([a(cc.Float)],e.prototype,"speed",void 0),__decorate([a(cc.Prefab)],e.prototype,"blockPrefab",void 0),__decorate([a(cc.Node)],e.prototype,"blockLayer",void 0),__decorate([a(i.Player)],e.prototype,"player",void 0),e=__decorate([r],e)}(cc.Component);o.Stage=s,cc._RF.pop()},{"./Block":"Block","./Player":"Player"}]},{},["Block","Game","OverPanel","Player","Stage"]);